(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.React,t=window.wp.domReady;var a=e.n(t);const c=window.wp.element,l=window.wp.apiFetch;var o=e.n(l);const s=window.wp.components,r=window.wp.i18n,i=window.wp.data,_=window.wp.notices;function h(){const e=(0,i.useSelect)((e=>e(_.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:t}=(0,i.useDispatch)(_.store);return(0,n.createElement)(s.SnackbarList,{notices:e,onRemove:t})}function m(){const e="/xml-cache/v1";o().use(o().createNonceMiddleware("xml_cache_nonce"));const[t,a]=(0,c.useState)(null),[l,_]=(0,c.useState)(!1),[m,p]=(0,c.useState)(null),d=()=>{o()({path:e+"/settings",method:"POST",data:t}).then((e=>{e.success?(_(!0),(0,i.dispatch)("core/notices").createNotice("success",(0,r.__)("Settings saved.","xml-cache"),{type:"snackbar",isDismissible:!0})):(0,i.dispatch)("core/notices").createNotice("error",(0,r.__)("Settings could't be saved.","xml-cache"),{type:"snackbar",isDismissible:!0})})).catch((e=>{console.error(e)}))},u=(e,n)=>{t[1][e]=n,a(t),d()},b=(e,n)=>{t[0][e]=n,a(t),d()};return(0,c.useEffect)((()=>(o()({path:e+"/settings"}).then((e=>{a(e)})).catch((e=>{console.error(e)})),o()({path:e+"/sitemap-url"}).then((e=>{e.success&&p(e.sitemap_url)})).catch((e=>{console.error(e)})),()=>{_(!1)})),[l]),null==t?(0,n.createElement)(s.Spinner,null):(0,n.createElement)(n.Fragment,null,(0,n.createElement)(s.Panel,{header:(0,r.__)("XML Cache Settings","xml-cache")},null==m&&(0,n.createElement)(s.Notice,{status:"error",isDismissible:!1},(0,r.__)("An unknown error occurred.","xml-cache")),(0,n.createElement)(s.PanelHeader,null,(0,n.createElement)(s.Button,{variant:"primary",href:m,icon:"admin-links",size:"compact",target:"_blank",disabled:null==m},(0,r.__)("Open Sitemap","xml-cache"))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Posts","xml-cache"),initialOpen:t[1].is_posts_panel_open,onToggle:e=>u("is_posts_panel_open",e)},(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for posts?","xml-cache"),checked:t[0].posts_enabled,onChange:e=>b("posts_enabled",e)}))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Categories","xml-cache"),initialOpen:t[1].is_categories_panel_open,onToggle:e=>u("is_categories_panel_open",e)},(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for categories?","xml-cache"),checked:t[0].categories_enabled,onChange:e=>b("categories_enabled",e)}))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Archives","xml-cache"),initialOpen:t[1].is_archives_panel_open,onToggle:e=>u("is_archives_panel_open",e)},(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for archives?","xml-cache"),checked:t[0].archives_enabled,onChange:e=>b("archives_enabled",e)}))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Tags","xml-cache"),initialOpen:t[1].is_tags_panel_open,onToggle:e=>u("is_tags_panel_open",e)},(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.CheckboxControl,{label:(0,r.__)("Enable","xml-cache"),help:(0,r.__)("Enable XML cache sitemap for tags?","xml-cache"),checked:t[0].tags_enabled,onChange:e=>b("tags_enabled",e)})))),(0,n.createElement)(h,null))}a()((()=>{const e=document.querySelector("xml-cache-settings");null!==e&&(0,c.render)((0,n.createElement)(m,null),e)}))})();